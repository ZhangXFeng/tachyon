<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_75) on Tue Aug 11 14:37:35 PDT 2015 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>TieredBlockStore (Tachyon Servers 0.7.1 API)</title>
<meta name="date" content="2015-08-11">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TieredBlockStore (Tachyon Servers 0.7.1 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TieredBlockStore.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../tachyon/worker/block/PinListSync.html" title="class in tachyon.worker.block"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?tachyon/worker/block/TieredBlockStore.html" target="_top">Frames</a></li>
<li><a href="TieredBlockStore.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">tachyon.worker.block</div>
<h2 title="Class TieredBlockStore" class="title">Class TieredBlockStore</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>tachyon.worker.block.TieredBlockStore</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">TieredBlockStore</span>
extends <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">This class represents an object store that manages all the blocks in the local tiered storage.
 This store exposes simple public APIs to operate blocks. Inside this store, it creates an
 Allocator to decide where to put a new block, an Evictor to decide where to evict a stale block,
 a BlockMetadataManager to maintain the status of the tiered storage, and a LockManager to
 coordinate read/write on the same block.
 <p>
 This class is thread-safe.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#TieredBlockStore(tachyon.conf.TachyonConf)">TieredBlockStore</a></strong>(<a href="http://tachyonproject.org/tachyon-common/apidocs/tachyon/conf/TachyonConf.html?is-external=true" title="class or interface in tachyon.conf">TachyonConf</a>&nbsp;tachyonConf)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#abortBlock(long,%20long)">abortBlock</a></strong>(long&nbsp;userId,
          long&nbsp;blockId)</code>
<div class="block">Aborts a temporary block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#accessBlock(long,%20long)">accessBlock</a></strong>(long&nbsp;userId,
           long&nbsp;blockId)</code>
<div class="block">Notifies the block store that a block was accessed so the block store could update accordingly
 the registered listeners such as evictor and allocator on block access.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#cleanupUser(long)">cleanupUser</a></strong>(long&nbsp;userId)</code>
<div class="block">Cleans up the data associated with a specific user (typically a dead user).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#commitBlock(long,%20long)">commitBlock</a></strong>(long&nbsp;userId,
           long&nbsp;blockId)</code>
<div class="block">Commits a temporary block to the local store.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../tachyon/worker/block/meta/TempBlockMeta.html" title="class in tachyon.worker.block.meta">TempBlockMeta</a></code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#createBlockMeta(long,%20long,%20tachyon.worker.block.BlockStoreLocation,%20long)">createBlockMeta</a></strong>(long&nbsp;userId,
               long&nbsp;blockId,
               <a href="../../../tachyon/worker/block/BlockStoreLocation.html" title="class in tachyon.worker.block">BlockStoreLocation</a>&nbsp;location,
               long&nbsp;initialBlockSize)</code>
<div class="block">Creates the meta data of a new block and assigns a temporary path (e.g., a subdir of the final
 location named after the the user ID) to store its data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#freeSpace(long,%20long,%20tachyon.worker.block.BlockStoreLocation)">freeSpace</a></strong>(long&nbsp;userId,
         long&nbsp;availableBytes,
         <a href="../../../tachyon/worker/block/BlockStoreLocation.html" title="class in tachyon.worker.block">BlockStoreLocation</a>&nbsp;location)</code>
<div class="block">Frees space to make a specific amount of bytes available in the location.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../tachyon/worker/block/meta/BlockMeta.html" title="class in tachyon.worker.block.meta">BlockMeta</a></code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#getBlockMeta(long,%20long,%20long)">getBlockMeta</a></strong>(long&nbsp;userId,
            long&nbsp;blockId,
            long&nbsp;lockId)</code>
<div class="block">Gets the meta data of a specific block from local storage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../tachyon/worker/block/io/BlockReader.html" title="interface in tachyon.worker.block.io">BlockReader</a></code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#getBlockReader(long,%20long,%20long)">getBlockReader</a></strong>(long&nbsp;userId,
              long&nbsp;blockId,
              long&nbsp;lockId)</code>
<div class="block">Creates a reader of an existing block to read data from this block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../tachyon/worker/block/BlockStoreMeta.html" title="class in tachyon.worker.block">BlockStoreMeta</a></code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#getBlockStoreMeta()">getBlockStoreMeta</a></strong>()</code>
<div class="block">Gets the meta data of the entire store in a snapshot.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../tachyon/worker/block/io/BlockWriter.html" title="interface in tachyon.worker.block.io">BlockWriter</a></code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#getBlockWriter(long,%20long)">getBlockWriter</a></strong>(long&nbsp;userId,
              long&nbsp;blockId)</code>
<div class="block">Creates a writer to write data to a temp block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../tachyon/worker/block/meta/BlockMeta.html" title="class in tachyon.worker.block.meta">BlockMeta</a></code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#getVolatileBlockMeta(long)">getVolatileBlockMeta</a></strong>(long&nbsp;blockId)</code>
<div class="block">Gets the metadata of a block given its blockId or throws IOException.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#hasBlockMeta(long)">hasBlockMeta</a></strong>(long&nbsp;blockId)</code>
<div class="block">Checks if the storage has a given block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#lockBlock(long,%20long)">lockBlock</a></strong>(long&nbsp;userId,
         long&nbsp;blockId)</code>
<div class="block">Locks an existing block and guards subsequent READs on this block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#moveBlock(long,%20long,%20tachyon.worker.block.BlockStoreLocation)">moveBlock</a></strong>(long&nbsp;userId,
         long&nbsp;blockId,
         <a href="../../../tachyon/worker/block/BlockStoreLocation.html" title="class in tachyon.worker.block">BlockStoreLocation</a>&nbsp;newLocation)</code>
<div class="block">Moves an existing block to a new location.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#registerBlockStoreEventListener(tachyon.worker.block.BlockStoreEventListener)">registerBlockStoreEventListener</a></strong>(<a href="../../../tachyon/worker/block/BlockStoreEventListener.html" title="interface in tachyon.worker.block">BlockStoreEventListener</a>&nbsp;listener)</code>
<div class="block">Registers a <a href="../../../tachyon/worker/block/BlockStoreEventListener.html" title="interface in tachyon.worker.block"><code>BlockStoreEventListener</code></a> to this block store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#removeBlock(long,%20long)">removeBlock</a></strong>(long&nbsp;userId,
           long&nbsp;blockId)</code>
<div class="block">Removes an existing block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#requestSpace(long,%20long,%20long)">requestSpace</a></strong>(long&nbsp;userId,
            long&nbsp;blockId,
            long&nbsp;additionalBytes)</code>
<div class="block">Requests to increase the size of a temp block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#unlockBlock(long)">unlockBlock</a></strong>(long&nbsp;lockId)</code>
<div class="block">Releases an acquired block lock based on a lockId (returned by <a href="../../../tachyon/worker/block/TieredBlockStore.html#lockBlock(long,%20long)"><code>lockBlock(long, long)</code></a>).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#unlockBlock(long,%20long)">unlockBlock</a></strong>(long&nbsp;userId,
           long&nbsp;blockId)</code>
<div class="block">NOTE: temporary, will be removed after changing client side code.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/TieredBlockStore.html#updatePinnedInodes(java.util.Set)">updatePinnedInodes</a></strong>(<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;&nbsp;inodes)</code>
<div class="block">updates the pinned blocks</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TieredBlockStore(tachyon.conf.TachyonConf)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TieredBlockStore</h4>
<pre>public&nbsp;TieredBlockStore(<a href="http://tachyonproject.org/tachyon-common/apidocs/tachyon/conf/TachyonConf.html?is-external=true" title="class or interface in tachyon.conf">TachyonConf</a>&nbsp;tachyonConf)
                 throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="lockBlock(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockBlock</h4>
<pre>public&nbsp;long&nbsp;lockBlock(long&nbsp;userId,
             long&nbsp;blockId)
               throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Locks an existing block and guards subsequent READs on this block. In case the block doesn't
 exist (e.g., evicted already), throw IOException.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - the ID of the user to lock this block</dd><dd><code>blockId</code> - the ID of the block to lock</dd>
<dt><span class="strong">Returns:</span></dt><dd>the lock ID if the lock is acquired successfully</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if blockId is invalid</dd></dl>
</li>
</ul>
<a name="unlockBlock(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockBlock</h4>
<pre>public&nbsp;void&nbsp;unlockBlock(long&nbsp;lockId)
                 throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Releases an acquired block lock based on a lockId (returned by <a href="../../../tachyon/worker/block/TieredBlockStore.html#lockBlock(long,%20long)"><code>lockBlock(long, long)</code></a>).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>lockId</code> - the ID of the lock returned by <a href="../../../tachyon/worker/block/TieredBlockStore.html#lockBlock(long,%20long)"><code>lockBlock(long, long)</code></a></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if lockId is invalid</dd></dl>
</li>
</ul>
<a name="unlockBlock(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockBlock</h4>
<pre>public&nbsp;void&nbsp;unlockBlock(long&nbsp;userId,
               long&nbsp;blockId)
                 throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">NOTE: temporary, will be removed after changing client side code.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getBlockWriter(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockWriter</h4>
<pre>public&nbsp;<a href="../../../tachyon/worker/block/io/BlockWriter.html" title="interface in tachyon.worker.block.io">BlockWriter</a>&nbsp;getBlockWriter(long&nbsp;userId,
                         long&nbsp;blockId)
                           throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Creates a writer to write data to a temp block. Since the temp block is "private" to the
 writer, this operation requires no previously acquired lock.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - the ID of the user to get the writer</dd><dd><code>blockId</code> - the ID of the temp block</dd>
<dt><span class="strong">Returns:</span></dt><dd>a <a href="../../../tachyon/worker/block/io/BlockWriter.html" title="interface in tachyon.worker.block.io"><code>BlockWriter</code></a> instance on this block</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the blockId is invalid, or block can not be created</dd></dl>
</li>
</ul>
<a name="getBlockReader(long, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockReader</h4>
<pre>public&nbsp;<a href="../../../tachyon/worker/block/io/BlockReader.html" title="interface in tachyon.worker.block.io">BlockReader</a>&nbsp;getBlockReader(long&nbsp;userId,
                         long&nbsp;blockId,
                         long&nbsp;lockId)
                           throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Creates a reader of an existing block to read data from this block.
 <p>
 This operation requires the lock ID returned by a previously acquired <a href="../../../tachyon/worker/block/TieredBlockStore.html#lockBlock(long,%20long)"><code>lockBlock(long, long)</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - the ID of the user to get the reader</dd><dd><code>blockId</code> - the ID of an existing block</dd><dd><code>lockId</code> - the ID of the lock returned by <a href="../../../tachyon/worker/block/TieredBlockStore.html#lockBlock(long,%20long)"><code>lockBlock(long, long)</code></a></dd>
<dt><span class="strong">Returns:</span></dt><dd>a <a href="../../../tachyon/worker/block/io/BlockReader.html" title="interface in tachyon.worker.block.io"><code>BlockReader</code></a> instance on this block</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the blockId or lockId is invalid, or block can not be read</dd></dl>
</li>
</ul>
<a name="createBlockMeta(long, long, tachyon.worker.block.BlockStoreLocation, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createBlockMeta</h4>
<pre>public&nbsp;<a href="../../../tachyon/worker/block/meta/TempBlockMeta.html" title="class in tachyon.worker.block.meta">TempBlockMeta</a>&nbsp;createBlockMeta(long&nbsp;userId,
                            long&nbsp;blockId,
                            <a href="../../../tachyon/worker/block/BlockStoreLocation.html" title="class in tachyon.worker.block">BlockStoreLocation</a>&nbsp;location,
                            long&nbsp;initialBlockSize)
                              throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Creates the meta data of a new block and assigns a temporary path (e.g., a subdir of the final
 location named after the the user ID) to store its data. This method only creates the meta data
 but adds NO data to this temporary location. The location can be a location with specific tier
 and dir, or <a href="../../../tachyon/worker/block/BlockStoreLocation.html#anyTier()"><code>BlockStoreLocation.anyTier()</code></a>, or
 <a href="../../../tachyon/worker/block/BlockStoreLocation.html#anyDirInTier(int)"><code>BlockStoreLocation.anyDirInTier(int)</code></a>.
 <p>
 Before commit, all the data written to this block will be stored in the temp path and the block
 is only "visible" to its writer client.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - the ID of the user</dd><dd><code>blockId</code> - the ID of the block to create</dd><dd><code>location</code> - location to create this block</dd><dd><code>initialBlockSize</code> - initial size of this block in bytes</dd>
<dt><span class="strong">Returns:</span></dt><dd>metadata of the temp block created</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if blockId or location is invalid, or this Store has no space</dd></dl>
</li>
</ul>
<a name="getVolatileBlockMeta(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVolatileBlockMeta</h4>
<pre>public&nbsp;<a href="../../../tachyon/worker/block/meta/BlockMeta.html" title="class in tachyon.worker.block.meta">BlockMeta</a>&nbsp;getVolatileBlockMeta(long&nbsp;blockId)
                               throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Gets the metadata of a block given its blockId or throws IOException. This method does not
 require a lock ID so the block is possible to be moved or removed after it returns.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blockId</code> - the block ID</dd>
<dt><span class="strong">Returns:</span></dt><dd>metadata of the block</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if no BlockMeta for this blockId is found</dd></dl>
</li>
</ul>
<a name="getBlockMeta(long, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockMeta</h4>
<pre>public&nbsp;<a href="../../../tachyon/worker/block/meta/BlockMeta.html" title="class in tachyon.worker.block.meta">BlockMeta</a>&nbsp;getBlockMeta(long&nbsp;userId,
                     long&nbsp;blockId,
                     long&nbsp;lockId)
                       throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Gets the meta data of a specific block from local storage.
 <p>
 This method requires the lock ID returned by a previously acquired <a href="../../../tachyon/worker/block/TieredBlockStore.html#lockBlock(long,%20long)"><code>lockBlock(long, long)</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - the ID of the user to get this file</dd><dd><code>blockId</code> - the ID of the block</dd><dd><code>lockId</code> - the ID of the lock</dd>
<dt><span class="strong">Returns:</span></dt><dd>metadata of the block</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the block can not be found</dd></dl>
</li>
</ul>
<a name="commitBlock(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitBlock</h4>
<pre>public&nbsp;void&nbsp;commitBlock(long&nbsp;userId,
               long&nbsp;blockId)
                 throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Commits a temporary block to the local store. After commit, the block will be available in this
 block store for all clients to access. Since a temp block is "private" to the writer, this
 method requires no previously acquired lock.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - the ID of the user</dd><dd><code>blockId</code> - the ID of a temp block</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the block can not be found or moved</dd></dl>
</li>
</ul>
<a name="abortBlock(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abortBlock</h4>
<pre>public&nbsp;void&nbsp;abortBlock(long&nbsp;userId,
              long&nbsp;blockId)
                throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Aborts a temporary block. The meta data of this block will not be added, its data will be
 deleted and the space will be reclaimed. Since a temp block is "private" to the writer, this
 requires no previously acquired lock.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - the ID of the user</dd><dd><code>blockId</code> - the ID of a temp block</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the block is invalid or committed or can not be removed</dd></dl>
</li>
</ul>
<a name="requestSpace(long, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>requestSpace</h4>
<pre>public&nbsp;void&nbsp;requestSpace(long&nbsp;userId,
                long&nbsp;blockId,
                long&nbsp;additionalBytes)
                  throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Requests to increase the size of a temp block. Since a temp block is "private" to the writer
 client, this operation requires no previously acquired lock.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - the ID of the user to request space</dd><dd><code>blockId</code> - the ID of the temp block</dd><dd><code>additionalBytes</code> - the amount of more space to request in bytes</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if there is not enough space or other blocks fail to be moved/evicted</dd></dl>
</li>
</ul>
<a name="moveBlock(long, long, tachyon.worker.block.BlockStoreLocation)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveBlock</h4>
<pre>public&nbsp;void&nbsp;moveBlock(long&nbsp;userId,
             long&nbsp;blockId,
             <a href="../../../tachyon/worker/block/BlockStoreLocation.html" title="class in tachyon.worker.block">BlockStoreLocation</a>&nbsp;newLocation)
               throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Moves an existing block to a new location. If the block can not be found, throw IOException.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - the ID of the user to move a block</dd><dd><code>blockId</code> - the ID of an existing block</dd><dd><code>newLocation</code> - the location of the destination</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if blockId or newLocation is invalid, or block cannot be moved</dd></dl>
</li>
</ul>
<a name="removeBlock(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeBlock</h4>
<pre>public&nbsp;void&nbsp;removeBlock(long&nbsp;userId,
               long&nbsp;blockId)
                 throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Removes an existing block. If the block can not be found in this store, throw IOException.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - the ID of the user to remove a block</dd><dd><code>blockId</code> - the ID of an existing block</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if blockId is invalid, or block cannot be removed</dd></dl>
</li>
</ul>
<a name="accessBlock(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accessBlock</h4>
<pre>public&nbsp;void&nbsp;accessBlock(long&nbsp;userId,
               long&nbsp;blockId)</pre>
<div class="block">Notifies the block store that a block was accessed so the block store could update accordingly
 the registered listeners such as evictor and allocator on block access.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - the ID of the user to access a block</dd><dd><code>blockId</code> - the ID of an accessed block</dd></dl>
</li>
</ul>
<a name="freeSpace(long, long, tachyon.worker.block.BlockStoreLocation)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>freeSpace</h4>
<pre>public&nbsp;void&nbsp;freeSpace(long&nbsp;userId,
             long&nbsp;availableBytes,
             <a href="../../../tachyon/worker/block/BlockStoreLocation.html" title="class in tachyon.worker.block">BlockStoreLocation</a>&nbsp;location)
               throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Frees space to make a specific amount of bytes available in the location.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - the user ID</dd><dd><code>availableBytes</code> - the amount of free space in bytes</dd><dd><code>location</code> - the location to free space</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if location is invalid, or there is not enough space, or eviction failed</dd></dl>
</li>
</ul>
<a name="cleanupUser(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanupUser</h4>
<pre>public&nbsp;void&nbsp;cleanupUser(long&nbsp;userId)
                 throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Cleans up the data associated with a specific user (typically a dead user). Clean up entails
 unlocking the block locks of this user, reclaiming space of temp blocks created by this
 user, and deleting the user temporary folder.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - the user ID</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if block can not be deleted or locks can not be released</dd></dl>
</li>
</ul>
<a name="hasBlockMeta(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasBlockMeta</h4>
<pre>public&nbsp;boolean&nbsp;hasBlockMeta(long&nbsp;blockId)</pre>
<div class="block">Checks if the storage has a given block.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blockId</code> - the block ID</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the block is contained, false otherwise</dd></dl>
</li>
</ul>
<a name="getBlockStoreMeta()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockStoreMeta</h4>
<pre>public&nbsp;<a href="../../../tachyon/worker/block/BlockStoreMeta.html" title="class in tachyon.worker.block">BlockStoreMeta</a>&nbsp;getBlockStoreMeta()</pre>
<div class="block">Gets the meta data of the entire store in a snapshot. There is no guarantee the state will
 be consistent with the snapshot after this method is called.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>store meta data</dd></dl>
</li>
</ul>
<a name="registerBlockStoreEventListener(tachyon.worker.block.BlockStoreEventListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerBlockStoreEventListener</h4>
<pre>public&nbsp;void&nbsp;registerBlockStoreEventListener(<a href="../../../tachyon/worker/block/BlockStoreEventListener.html" title="interface in tachyon.worker.block">BlockStoreEventListener</a>&nbsp;listener)</pre>
<div class="block">Registers a <a href="../../../tachyon/worker/block/BlockStoreEventListener.html" title="interface in tachyon.worker.block"><code>BlockStoreEventListener</code></a> to this block store.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>listener</code> - the listener to those events</dd></dl>
</li>
</ul>
<a name="updatePinnedInodes(java.util.Set)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>updatePinnedInodes</h4>
<pre>public&nbsp;void&nbsp;updatePinnedInodes(<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;&nbsp;inodes)</pre>
<div class="block">updates the pinned blocks</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>inodes,</code> - a set of IDs inodes that are pinned</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TieredBlockStore.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../tachyon/worker/block/PinListSync.html" title="class in tachyon.worker.block"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?tachyon/worker/block/TieredBlockStore.html" target="_top">Frames</a></li>
<li><a href="TieredBlockStore.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2015. All Rights Reserved.</small></p>
</body>
</html>
